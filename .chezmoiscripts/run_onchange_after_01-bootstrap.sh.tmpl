#!/usr/bin/env bash

# .bootstrap/kde-setup.yml hash: {{ include "dot_bootstrap/kde-setup.yml" | sha256sum }}
# .bootstrap/hypr-setup.yml hash: {{ include "dot_bootstrap/hypr-setup.yml" | sha256sum }}

if command -v ansible-playbook &> /dev/null; then
    case "$XDG_CURRENT_DESKTOP" in
        *KDE*)
            ansible-playbook {{ joinPath .chezmoi.sourceDir "dot_bootstrap/kde-setup.yml" | quote }} --ask-become-pass
            ;;
        *Hyprland*)
            ansible-playbook {{ joinPath .chezmoi.sourceDir "dot_bootstrap/hypr-setup.yml" | quote }} --ask-become-pass
            ;;
        *)
            echo "Unsupported desktop environment: $XDG_CURRENT_DESKTOP"
            exit 1
            ;;
    esac
fi